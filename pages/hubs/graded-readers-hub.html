<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graded Readers Hub - Teacher Alex English Academy</title>
    
    <!-- CSS Limpo -->
    <link rel="stylesheet" href="../../src/styles/base.css">
    <link rel="stylesheet" href="../../src/styles/layout.css">
    <link rel="stylesheet" href="../../src/styles/theme-patriot.css">

    <!-- No <head> de TODAS as p√°ginas -->
    <script src="../../src/scripts/core/navigation-fix.js"></script>
    
</head>
<body>
    <!-- User Widget -->
    <div class="user-widget">
        <div class="user-avatar" id="userAvatar">A</div>
        <span class="user-name" id="userName">Aluno</span>
        <button class="logout-btn" onclick="logout()">Sair</button>
    </div>

    <div class="container">
        <!-- Back Navigation -->
        <a href="../../index.html" class="back-button">
            ‚Üê Voltar ao Dashboard
        </a>
        
        <!-- Header -->
        <header class="header">
            <h1 class="logo">Teacher Alex <span class="logo-highlight">English Academy</span></h1>
            <h2 class="hub-title">üìö Graded Readers Hub</h2>
            <p class="hub-subtitle">Hub organizado com hist√≥rias por n√≠vel para absor√ß√£o de vocabul√°rio</p>
        </header>

        <!-- A1 Level -->
        <section class="level-section">
            <div class="level-header">
                <div class="level-badge">A1 - Beginner</div>
                <div class="level-info">
                    <h2 class="level-title">N√≠vel Iniciante</h2>
                    <p class="level-description">Vocabul√°rio b√°sico e gram√°tica simples para come√ßar sua jornada no ingl√™s</p>
                </div>
            </div>
            
            <div class="stories-grid">
                <!-- The Roommate Problem - DISPON√çVEL -->
                <div class="story-card" onclick="navigateToStory('roommate')">
                    <div class="story-header">
                        <div class="story-icon">üè†</div>
                        <h3 class="story-title">The Roommate Problem</h3>
                        <p class="story-description">Sarah e Emma enfrentam problemas de conviv√™ncia que testam sua amizade</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>3 cap√≠tulos progressivos</li>
                            <li>Vocabul√°rio do dia a dia</li>
                            <li>Gram√°tica b√°sica essencial</li>
                            <li>√Åudio IA de alta qualidade</li>
                            <li>Sistema de badges motivador</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button">Come√ßar Hist√≥ria A1</button>
                    </div>
                    <div class="progress-badge" id="roommateProgress">‚úÖ Dispon√≠vel</div>
                </div>

                <!-- New Friends at School - EM BREVE -->
                <div class="story-card coming-soon" onclick="showComingSoon('New Friends at School')">
                    <div class="story-header">
                        <div class="story-icon">üåü</div>
                        <h3 class="story-title">New Friends at School</h3>
                        <p class="story-description">Uma hist√≥ria tocante sobre fazer novos amigos e superar a timidez</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>4 cap√≠tulos envolventes</li>
                            <li>Vocabul√°rio escolar b√°sico</li>
                            <li>Express√µes de amizade</li>
                            <li>√Åudio IA naturalizado</li>
                            <li>Situa√ß√µes do cotidiano</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button" disabled>üöÄ Em Breve</button>
                    </div>
                </div>

                <!-- The Pizza Restaurant - EM BREVE -->
                <div class="story-card coming-soon" onclick="showComingSoon('The Pizza Restaurant')">
                    <div class="story-header">
                        <div class="story-icon">üçï</div>
                        <h3 class="story-title">The Pizza Restaurant</h3>
                        <p class="story-description">Aventuras e confus√µes divertidas em um restaurante familiar italiano</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>3 cap√≠tulos cheios de humor</li>
                            <li>Vocabul√°rio de comida</li>
                            <li>Situa√ß√µes pr√°ticas</li>
                            <li>√Åudio IA expressivo</li>
                            <li>Cultura italiana b√°sica</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button" disabled>üöÄ Em Breve</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- A2 Level -->
        <section class="level-section">
            <div class="level-header">
                <div class="level-badge">A2 - Elementary</div>
                <div class="level-info">
                    <h2 class="level-title">N√≠vel Elementar</h2>
                    <p class="level-description">Expans√£o vocabular e estruturas mais complexas para consolidar o aprendizado</p>
                </div>
            </div>
            
            <div class="stories-grid">
                <!-- The Secret in the Old House - DISPON√çVEL -->
                <div class="story-card" onclick="navigateToStory('secret-house')">
                    <div class="story-header">
                        <div class="story-icon">üèöÔ∏è</div>
                        <h3 class="story-title">The Secret in the Old House</h3>
                        <p class="story-description">Emma descobre mist√©rios fascinantes escondidos na casa antiga de sua vizinha</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>4 cap√≠tulos de mist√©rio</li>
                            <li>Vocabul√°rio intermedi√°rio</li>
                            <li>Gram√°tica A2 estruturada</li>
                            <li>√Åudio IA dramatizado</li>
                            <li>Narrativa cativante</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button">Come√ßar Hist√≥ria A2</button>
                    </div>
                    <div class="progress-badge" id="secretProgress">‚úÖ Dispon√≠vel</div>
                </div>

                <!-- The School Play - EM BREVE -->
                <div class="story-card coming-soon" onclick="showComingSoon('The School Play')">
                    <div class="story-header">
                        <div class="story-icon">üé≠</div>
                        <h3 class="story-title">The School Play</h3>
                        <p class="story-description">Drama e com√©dia nos bastidores de uma pe√ßa teatral escolar</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>5 cap√≠tulos dram√°ticos</li>
                            <li>Vocabul√°rio art√≠stico</li>
                            <li>Express√µes emotivas</li>
                            <li>√Åudio IA dramatizado</li>
                            <li>Cultura teatral b√°sica</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button" disabled>üöÄ Em Breve</button>
                    </div>
                </div>

                <!-- Summer Beach Adventure - EM BREVE -->
                <div class="story-card coming-soon" onclick="showComingSoon('Summer Beach Adventure')">
                    <div class="story-header">
                        <div class="story-icon">üåä</div>
                        <h3 class="story-title">Summer Beach Adventure</h3>
                        <p class="story-description">F√©rias de ver√£o cheias de aventura, descobertas e amizades</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>4 cap√≠tulos de aventura</li>
                            <li>Vocabul√°rio de viagem</li>
                            <li>Tempos verbais variados</li>
                            <li>√Åudio IA relaxante</li>
                            <li>Cultura americana</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button" disabled>üöÄ Em Breve</button>
                    </div>
                </div>

                <!-- The Science Competition - EM BREVE -->
                <div class="story-card coming-soon" onclick="showComingSoon('The Science Competition')">
                    <div class="story-header">
                        <div class="story-icon">üî¨</div>
                        <h3 class="story-title">The Science Competition</h3>
                        <p class="story-description">Rivalidade saud√°vel e parceria inesperada em uma competi√ß√£o cient√≠fica</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>4 cap√≠tulos educativos</li>
                            <li>Vocabul√°rio cient√≠fico</li>
                            <li>Estruturas comparativas</li>
                            <li>√Åudio IA educativo</li>
                            <li>M√©todo cient√≠fico</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button" disabled>üöÄ Em Breve</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- B1 Level -->
        <section class="level-section">
            <div class="level-header">
                <div class="level-badge">B1 - Intermediate</div>
                <div class="level-info">
                    <h2 class="level-title">N√≠vel Intermedi√°rio</h2>
                    <p class="level-description">Para seus poucos alunos avan√ßados - prepara√ß√£o s√©ria para flu√™ncia</p>
                </div>
            </div>
            
            <div class="stories-grid">
                <!-- The Job Interview - EM BREVE -->
                <div class="story-card coming-soon" onclick="showComingSoon('The Job Interview')">
                    <div class="story-header">
                        <div class="story-icon">üíº</div>
                        <h3 class="story-title">The Job Interview</h3>
                        <p class="story-description">Prepara√ß√£o profissional intensa e desafios reais do mundo corporativo</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>5 cap√≠tulos profissionais</li>
                            <li>Vocabul√°rio corporativo</li>
                            <li>Gram√°tica B1 complexa</li>
                            <li>√Åudio IA profissional</li>
                            <li>Situa√ß√µes de trabalho</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button" disabled>üöÄ Em Breve</button>
                    </div>
                </div>

                <!-- Around the World - EM BREVE -->
                <div class="story-card coming-soon" onclick="showComingSoon('Around the World')">
                    <div class="story-header">
                        <div class="story-icon">üåç</div>
                        <h3 class="story-title">Around the World</h3>
                        <p class="story-description">Viagem cultural fascinante pelos continentes e suas tradi√ß√µes</p>
                    </div>
                    <div class="story-content">
                        <ul class="story-features">
                            <li>6 cap√≠tulos globais</li>
                            <li>Vocabul√°rio cultural</li>
                            <li>Estruturas complexas</li>
                            <li>√Åudio IA multicultural</li>
                            <li>Geografia mundial</li>
                        </ul>
                    </div>
                    <div class="story-footer">
                        <button class="story-button" disabled>üöÄ Em Breve</button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Footer -->
        <footer class="footer">
            <h3>üìö Graded Readers Hub</h3>
            <p>Hist√≥rias organizadas por n√≠vel para absor√ß√£o natural de vocabul√°rio</p>
        </footer>
    </div>

    <script>
        // ===== AUTH CHECK =====
        if (sessionStorage.getItem('studentLoggedIn') !== 'true') {
            window.location.href = '../auth/login.html';
        }

        // ===== INITIALIZATION =====
        const studentName = sessionStorage.getItem('studentUsername') || 'Student';
        
        // Update UI
        document.getElementById('userName').textContent = studentName;
        document.getElementById('userAvatar').textContent = studentName.charAt(0).toUpperCase();

        // ===== PROGRESS LOADING =====
        function loadProgress() {
            const progressKey = `progress_${studentName}`;
            const saved = localStorage.getItem(progressKey);
            
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    
                    // Roommate progress
                    const roommate = data.roommate || { chaptersCompleted: [] };
                    const roommateCompleted = roommate.chaptersCompleted.length;
                    
                    const roommateProgress = document.getElementById('roommateProgress');
                    if (roommateCompleted === 0) {
                        roommateProgress.textContent = '‚úÖ Dispon√≠vel';
                    } else if (roommateCompleted === 3) {
                        roommateProgress.textContent = 'üèÜ Completo';
                        roommateProgress.style.background = 'var(--success)';
                        roommateProgress.style.color = 'white';
                    } else {
                        roommateProgress.textContent = `${roommateCompleted}/3 ‚úì`;
                        roommateProgress.style.background = 'var(--success)';
                        roommateProgress.style.color = 'white';
                    }
                    
                    // Secret House progress
                    const reading = data.reading || { chaptersCompleted: [] };
                    const readingCompleted = reading.chaptersCompleted.length;
                    
                    const secretProgress = document.getElementById('secretProgress');
                    if (readingCompleted === 0) {
                        secretProgress.textContent = '‚úÖ Dispon√≠vel';
                    } else if (readingCompleted === 4) {
                        secretProgress.textContent = 'üèÜ Completo';
                        secretProgress.style.background = 'var(--success)';
                        secretProgress.style.color = 'white';
                    } else {
                        secretProgress.textContent = `${readingCompleted}/4 ‚úì`;
                        secretProgress.style.background = 'var(--success)';
                        secretProgress.style.color = 'white';
                    }
                    
                } catch (e) {
                    console.error('Erro ao carregar progresso:', e);
                }
            }
        }

        // ===== NAVIGATION =====
        function navigateToStory(storyId) {
            const card = event.currentTarget;
            const button = card.querySelector('.story-button');
            const originalText = button.textContent;
            
            // Loading state
            button.textContent = 'Carregando...';
            card.style.opacity = '0.7';
            
            setTimeout(() => {
                if (storyId === 'roommate') {
                    window.location.href = '../reading/graded/roommate-problem-story.html';
                } else if (storyId === 'secret-house') {
                    window.location.href = '../reading/graded/secret-house-story.html';
                }
            }, 500);
        }

        function showComingSoon(storyTitle) {
            const messages = [
                `üöÄ "${storyTitle}" est√° em desenvolvimento!`,
                `üìö Em breve teremos esta hist√≥ria incr√≠vel!`,
                `‚≠ê Continue praticando enquanto preparamos "${storyTitle}"!`,
                `üéØ Sua dedica√ß√£o ser√° recompensada quando "${storyTitle}" for lan√ßada!`
            ];
            alert(messages[Math.floor(Math.random() * messages.length)]);
        }

        // ===== LOGOUT =====
        function logout() {
            sessionStorage.clear();
            window.location.href = '../auth/login.html';
        }

        // ===== LOAD DATA =====
        loadProgress();
        
        console.log('üìö GRADED READERS HUB v3.0 BEAUTIFUL carregado!');
        console.log('üë§ Usu√°rio:', studentName);
        console.log('üéØ Navega√ß√£o: roommate + secret-house funcionando!');
    </script>
</body>
</html>
